[gd_scene load_steps=9 format=3 uid="uid://town3kaillouxmap"]

[ext_resource type="PackedScene" uid="uid://bqr5c8j2xk3yp" path="res://scenes/player/player.tscn" id="1_player"]
[ext_resource type="PackedScene" uid="uid://cnpc8kailloux3" path="res://scenes/npcs/kaillou_npc.tscn" id="2_npc"]
[ext_resource type="PackedScene" uid="uid://dchest3kailloux" path="res://scenes/world/objects/chest.tscn" id="3_chest"]
[ext_resource type="Texture2D" uid="uid://tile_grass_town" path="res://assets/sprites/environment/tile_grass.svg" id="4_grass"]
[ext_resource type="Texture2D" uid="uid://tile_path_town" path="res://assets/sprites/environment/tile_path.svg" id="5_path"]
[ext_resource type="Texture2D" uid="uid://tree_town" path="res://assets/sprites/environment/tree.svg" id="6_tree"]
[ext_resource type="Texture2D" uid="uid://bush_town" path="res://assets/sprites/environment/bush.svg" id="7_bush"]
[ext_resource type="Texture2D" uid="uid://rock_town" path="res://assets/sprites/environment/rock.svg" id="8_rock"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_wall"]
size = Vector2(1600, 32)

[node name="Town" type="Node2D"]

[node name="Background" type="ColorRect" parent="."]
z_index = -10
offset_left = -800.0
offset_top = -600.0
offset_right = 800.0
offset_bottom = 600.0
color = Color(0.36, 0.55, 0.24, 1)

[node name="Paths" type="Node2D" parent="."]
z_index = -5

[node name="PathV" type="ColorRect" parent="Paths"]
offset_left = -40.0
offset_top = -500.0
offset_right = 40.0
offset_bottom = 500.0
color = Color(0.63, 0.5, 0.38, 1)

[node name="PathH" type="ColorRect" parent="Paths"]
offset_left = -500.0
offset_top = -30.0
offset_right = 500.0
offset_bottom = 30.0
color = Color(0.63, 0.5, 0.38, 1)

[node name="Plaza" type="ColorRect" parent="Paths"]
offset_left = -100.0
offset_top = -100.0
offset_right = 100.0
offset_bottom = 100.0
color = Color(0.55, 0.45, 0.35, 1)

[node name="Ground" type="Node2D" parent="."]

[node name="Decorations" type="Node2D" parent="."]
z_index = -2

[node name="Tree1" type="Sprite2D" parent="Decorations"]
position = Vector2(-500, -300)
texture = ExtResource("6_tree")

[node name="Tree2" type="Sprite2D" parent="Decorations"]
position = Vector2(-550, -150)
texture = ExtResource("6_tree")

[node name="Tree3" type="Sprite2D" parent="Decorations"]
position = Vector2(500, -250)
texture = ExtResource("6_tree")

[node name="Tree4" type="Sprite2D" parent="Decorations"]
position = Vector2(550, -400)
texture = ExtResource("6_tree")

[node name="Tree5" type="Sprite2D" parent="Decorations"]
position = Vector2(-600, 300)
texture = ExtResource("6_tree")

[node name="Tree6" type="Sprite2D" parent="Decorations"]
position = Vector2(600, 350)
texture = ExtResource("6_tree")

[node name="Tree7" type="Sprite2D" parent="Decorations"]
position = Vector2(-450, 450)
texture = ExtResource("6_tree")

[node name="Tree8" type="Sprite2D" parent="Decorations"]
position = Vector2(450, 450)
texture = ExtResource("6_tree")

[node name="Bush1" type="Sprite2D" parent="Decorations"]
position = Vector2(-350, -400)
texture = ExtResource("7_bush")

[node name="Bush2" type="Sprite2D" parent="Decorations"]
position = Vector2(350, -350)
texture = ExtResource("7_bush")

[node name="Bush3" type="Sprite2D" parent="Decorations"]
position = Vector2(-250, 350)
texture = ExtResource("7_bush")

[node name="Bush4" type="Sprite2D" parent="Decorations"]
position = Vector2(300, 250)
texture = ExtResource("7_bush")

[node name="Bush5" type="Sprite2D" parent="Decorations"]
position = Vector2(-150, -200)
texture = ExtResource("7_bush")

[node name="Rock1" type="Sprite2D" parent="Decorations"]
position = Vector2(-600, -450)
texture = ExtResource("8_rock")

[node name="Rock2" type="Sprite2D" parent="Decorations"]
position = Vector2(650, -100)
texture = ExtResource("8_rock")

[node name="Rock3" type="Sprite2D" parent="Decorations"]
position = Vector2(-650, 150)
texture = ExtResource("8_rock")

[node name="Rock4" type="Sprite2D" parent="Decorations"]
position = Vector2(200, 400)
texture = ExtResource("8_rock")

[node name="Walls" type="Node2D" parent="."]

[node name="WallTop" type="StaticBody2D" parent="Walls"]
position = Vector2(0, -616)
collision_layer = 4
collision_mask = 0

[node name="CollisionShape2D" type="CollisionShape2D" parent="Walls/WallTop"]
shape = SubResource("RectangleShape2D_wall")

[node name="WallBottom" type="StaticBody2D" parent="Walls"]
position = Vector2(0, 616)
collision_layer = 4
collision_mask = 0

[node name="CollisionShape2D" type="CollisionShape2D" parent="Walls/WallBottom"]
shape = SubResource("RectangleShape2D_wall")

[node name="WallLeft" type="StaticBody2D" parent="Walls"]
position = Vector2(-816, 0)
rotation = 1.5708
collision_layer = 4
collision_mask = 0

[node name="CollisionShape2D" type="CollisionShape2D" parent="Walls/WallLeft"]
shape = SubResource("RectangleShape2D_wall")

[node name="WallRight" type="StaticBody2D" parent="Walls"]
position = Vector2(816, 0)
rotation = 1.5708
collision_layer = 4
collision_mask = 0

[node name="CollisionShape2D" type="CollisionShape2D" parent="Walls/WallRight"]
shape = SubResource("RectangleShape2D_wall")

[node name="Player" parent="." instance=ExtResource("1_player")]
position = Vector2(0, 150)

[node name="NPCs" type="Node2D" parent="."]

[node name="NPC_Galet" parent="NPCs" instance=ExtResource("2_npc")]
position = Vector2(-200, -100)
kaillou_type = 0
dialogue_lines = Array[String](["Bienvenue en ville, petit caillou!", "As-tu vu les coffres caches?", "Bonne chance dans ton aventure!"])

[node name="NPC_Silex" parent="NPCs" instance=ExtResource("2_npc")]
position = Vector2(200, -150)
kaillou_type = 1
personality = "grumpy"
dialogue_lines = Array[String](["Hmph, encore un nouveau...", "Ne me derange pas.", "Va explorer ailleurs."])

[node name="NPC_Granit" parent="NPCs" instance=ExtResource("2_npc")]
position = Vector2(0, -300)
kaillou_type = 2
dialogue_lines = Array[String](["Je suis le gardien de cette place.", "Les terres sauvages sont dangereuses.", "Prouve ta valeur avant d'y aller."])

[node name="NPC_Sleeping" parent="NPCs" instance=ExtResource("2_npc")]
position = Vector2(-300, 200)
kaillou_type = 0
start_sleeping = true
dialogue_lines = Array[String](["Zzz... oh tu m'as reveille!", "J'ai fait un beau reve de rochers..."])

[node name="NPC_Gravel" parent="NPCs" instance=ExtResource("2_npc")]
position = Vector2(350, 100)
kaillou_type = 4
personality = "shy"
dialogue_lines = Array[String](["Psst... il y a un secret a l'est!", "Ne dis a personne que je t'ai dit ca!"])

[node name="Chests" type="Node2D" parent="."]

[node name="Chest1" parent="Chests" instance=ExtResource("3_chest")]
position = Vector2(-450, -250)
content_item_id = "small_gem"

[node name="Chest2" parent="Chests" instance=ExtResource("3_chest")]
position = Vector2(480, -350)
content_item_id = "fan"

[node name="ChestTrap" parent="Chests" instance=ExtResource("3_chest")]
position = Vector2(550, 380)
is_trap = true
